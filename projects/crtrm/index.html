
			<!DOCTYPE html>
			<html lang="en">
			<meta charset="utf-8">
			<meta name="viewport" content="width=device-width, initial-scale=1">
			<meta name="color-scheme" content="light dark">
			<link rel="icon" type="image/png" href="data:image/png;base64,">
			<title>The C Real-Time Raymarcher</title>
			<style>
				@media (prefers-color-scheme: dark){
					body {
						background:#000;
						--bg-color: #000;
					}
				}
				body{
					margin:1em auto;
					max-width:40em;
					padding:0 .62em 3.24em;
					font:1.2em/1.62 sans-serif;
					--bg-color: white;
				}
				h1,h2,h3 {
					line-height:1.2
				}
				article h1 {
					margin-left: 0;
					text-align: center;
				}
				.summary {
					text-align: center;
				}
				@media print{
					body{
						max-width:none
					}
				}
				img {
					max-width: 25%;
					height: auto;
					float: left;
					margin: 0 1em 1em 0;
				}
				img.right {
					float: right;
					margin: 0 0 1em 1em;
				}
				article img {
					cursor: pointer;
					transition: opacity 0.2s;
				}
				article img:hover {
					opacity: 0.85;
				}
				.lightbox-overlay {
					display: none;
					position: fixed;
					top: 0;
					left: 0;
					width: 100%;
					height: 100%;
					background: rgba(0, 0, 0, 0.9);
					z-index: 9999;
					justify-content: center;
					align-items: center;
					cursor: pointer;
				}
				.lightbox-overlay.active {
					display: flex;
				}
				.lightbox-overlay img {
					max-width: 90%;
					max-height: 90%;
					object-fit: contain;
					border-radius: 4px;
					box-shadow: 0 0 30px rgba(0,0,0,0.5);
					float: none;
					margin: 0;
					cursor: default;
				}
				.lightbox-close {
					position: absolute;
					top: 20px;
					right: 30px;
					color: white;
					font-size: 40px;
					font-weight: bold;
					cursor: pointer;
				}
				.lightbox-close:hover {
					color: #ccc;
				}
			</style>
			<article>
			<header>

			<h1>The C Real-Time Raymarcher</h1>
			</header>
			<div class="summary">
<p><img loading="lazy" src="/projects/crtrm/neon_nanocite_thumb.png" alt="" title="Nanocite"> <a href="/projects/crtrm/index.html?loc=mainpage">CRTRM</a> - The C Real Time Ray Marcher.  A path traced ray marcher that can render mathematical shapes in real time on the CPU.  It can render unusual shapes like Voronoi shapes, fractals, and harmonic shapes.</p>
</div>
<div style="clear:both"></div>
<div style="text-align: center; margin: 2em 0;"><span style="display: inline-block; width: 20%; border-top: 2px solid #333; position: relative;"><span style="position: absolute; top: -0.6em; left: 50%; transform: translateX(-50%); background: var(--bg-color, white); padding: 0 0.5em; font-size: 1.5em;">◆</span></span></div>
<div style="clear:both"></div>
<p><img loading="lazy" src="neon-nanocite.png" alt="nanocite" class="right"> crtrm is an exploration of worlds that only exist in mathematics.  With crtrm, I am able to visualise landscapes and creatures I have never seen before.  Every time I start crtrm, it is like a trip to another planet.</p>
<div style="clear:both"></div>
<p><img loading="lazy" src="sketchhills1.png" alt=""></p>
<p>When I started this project, I thought that it would be difficult to find new and interesting forms to view.  I expected that the common formulas would result in dull pictures, and that it would take me weeks or months to create something more interesting.  Instead, almost everything turned out to be interesting or beautiful, and often both.  Simple formulas produced complex, lifelike forms.</p>
<div style="clear:both"></div>
<p><img loading="lazy" src="sketchhills1.png" alt="'The Opera House', Harmonic hills with sketch shader"></p>
<p><img loading="lazy" src="sketchhills4.png" alt="要塞  Fortress hills with sketch shader and heavy Moire banding"></p>
<p><img loading="lazy" src="sketchhills7.png" alt="要塞  Fortress hills with sketch shader and heavy Moire banding" title="Another Opera House?"></p>
<h3 id="harmonic-hills">Harmonic hills</h3>
<div style="clear:both"></div>
<p><img loading="lazy" src="more-hills.png" alt="The red hills of... harmonia? I guess?"></p>
<p><img loading="lazy" src="spike-textured-shaded.jpg" alt="Nanocite" title="The original nanocite image that sparked my interest and held it for so long"></p>
<p><img loading="lazy" src="spikeball2.png" alt="Spikey Ball" title="Spikey Ball or Anemone?"></p>
<h3 id="nanocite">Nanocite</h3>
<div style="clear:both"></div>
<p><img loading="lazy" src="sketchhills11.png" alt="Harmonic hills" title="Harmonic hills again, improved GLSL shader with the Moire banding removed"></p>
<p><img loading="lazy" src="hills-in-shadow.jpg" alt="Harmonic hills" title="Hills in shadow, showing incomplete render steps"></p>
<h3 id="glsl">GLSL</h3>
<div style="clear:both"></div>
<h3 id="fourier-surfaces">Fourier Surfaces</h3>
<iframe width="420" height="315" src="https://www.youtube.com/embed/zXHyr_vKOGE" frameborder="0" allowfullscreen></iframe>
<div style="clear:both"></div>
<h3 id="project-history">Project History</h3>
<p>crtrm started as a simple <a href="/projects/javascriptraymarcher">path tracer in Javascript</a>.  Naturally, I spent more and more time optimising it until it became clear that I was never going to get it up to a reasonable speed.  The original is still useful, and I still use it for doing high quality renders of interesting shapes.  One day, I will get the MandleBulb rendering properly!</p>
<p>So I spent several weeks researching the field of fast path-tracing, prototyping (in Haskell) and rewrote everything in C over a three day, intense coding burst.</p>
<p>The results were still too slow.  It was taking around 5 seconds to render one frame.  I would need a 200x speedup to be considered real time.  And piece by piece, I am working my way towards the goal.  crtrm has gained Adaptive Depth Caching, SIMD/SSE support, OS level mult-threading, GLUT and SDL integration, shaders, material shaders, Constructive (and Destructive) Solid Geometry, surface carving, and 3 separate, competing implementations of the rendering core, to get the maximum speed from a processor.</p>
<p>crtrm is slowly gaining some physics engine capabilities.  Collision handling is already working, and I'm looking forwards to adding momentum and soft-body deformations.</p>

			</article>
			<div class="lightbox-overlay" id="lightbox">
				<span class="lightbox-close" id="lightbox-close">&times;</span>
				<img src="" alt="" id="lightbox-img">
			</div>
			<script>
			(function() {
				var overlay = document.getElementById('lightbox');
				var lightboxImg = document.getElementById('lightbox-img');
				var closeBtn = document.getElementById('lightbox-close');
				
				// Add click handler to all images in the article (skip linked images)
				document.querySelectorAll('article img:not(.no-lightbox)').forEach(function(img) {
					img.addEventListener('click', function(e) {
						e.preventDefault();
						lightboxImg.src = this.src;
						lightboxImg.alt = this.alt;
						overlay.classList.add('active');
					});
				});
				
				// Close on any click
				overlay.addEventListener('click', function() {
					overlay.classList.remove('active');
				});
				
				// Close on escape key
				document.addEventListener('keydown', function(e) {
					if (e.key === 'Escape') {
						overlay.classList.remove('active');
					}
				});
			})();
			</script>
			</html>
			