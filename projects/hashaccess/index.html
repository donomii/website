
			<!DOCTYPE html>
			<html lang="en">
			<meta charset="utf-8">
			<meta name="viewport" content="width=device-width, initial-scale=1">
			<meta name="color-scheme" content="light dark">
			<link rel="icon" type="image/png" href="data:image/png;base64,">
			<title>SPATH</title>
			<style>
				@media (prefers-color-scheme: dark){
					body {
						background:#000;
						--bg-color: #000;
					}
				}
				body{
					margin:1em auto;
					max-width:40em;
					padding:0 .62em 3.24em;
					font:1.2em/1.62 sans-serif;
					--bg-color: white;
				}
				h1,h2,h3 {
					line-height:1.2
				}
				article h1 {
					margin-left: 0;
					text-align: center;
				}
				.summary {
					text-align: center;
				}
				@media print{
					body{
						max-width:none
					}
				}
				img {
					max-width: 25%;
					height: auto;
					float: left;
					margin: 0 1em 1em 0;
				}
				img.right {
					float: right;
					margin: 0 0 1em 1em;
				}
			</style>
			<article>
			<header>

			<h1>SPATH</h1>
			</header>
			<div class="summary">
<p>Easy access to Racket nested data structures</p>
</div>
<div style="clear:both"></div>
<div style="text-align: center; margin: 2em 0;"><span style="display: inline-block; width: 20%; border-top: 2px solid #333; position: relative;"><span style="position: absolute; top: -0.6em; left: 50%; transform: translateX(-50%); background: var(--bg-color, white); padding: 0 0.5em; font-size: 1.5em;">â—†</span></span></div>
<p><a href="spath.rkt">spath for PLT racket</a></p>
<p>Turns this</p>
<pre><code>(hashref (hashref (hashref h key1) key2 ) key3 ) 
</code></pre>
<p>into this</p>
<pre><code>(spath '( key1 key2 key3 ) h)
</code></pre>
<h3 id="examples">Examples</h3>
<pre><code>[spath 
   '[1 &quot;bananas&quot;]                                   ; Extract the 1th (second) element of the list, then do a hash lookup for the word &quot;bananas&quot; 
   '[ &quot;c&quot; [ [apples . &quot;yes&quot;] [&quot;bananas&quot; &quot;no&quot;] ]]]  


-&gt; '(&quot;no&quot;)
</code></pre>
<p>and using an example from the manual:</p>
<pre><code>(struct posn (x y [z #:auto]) #:auto-value 0 #:transparent)
(let ((position [posn 1 '[a b c]]])) 


(s= y/1 position))  
  
  
-&gt; 'b
</code></pre>
<p>Spath gives you easy (read) access to nested data structures, similar to
other popular scripting languages.  Spath can currently handle nested
vectors, lists, assoc lists, hashes and records.</p>
<p>This is handy when dealing with large datastructures, usually
generated by someone else.  So for instance, you can import a JSON data structure,
and then use spath to find and (coming soon) modify
parts of the document using native scheme functions.</p>
<p>There are several different functions provided for your convenient,
starting with the basic spath</p>
<pre><code>(spath '( key1 key2 key3 ) data-structure)
</code></pre>
<p>spath will recurse through the data structure, using each element from
'( key1 key2 key3 ) list as a key to access each level of the nested data structure.  spath does not catch errors,
so any &quot;key not found&quot; or &quot;array index out of bounds&quot; errors will bubble
up to the calling function.</p>
<pre><code>(s= key1/key2/key3 data-structure )
</code></pre>
<p>s= works similar to spath, but uses sloppy matching for the keys.  Unlike spath,
s= accepts keys separated by the '/' character, similar to the way directory
paths work.  So/you/can/write/keys/like/this.  = breaks the keys up, then tries
each one first as a number (if possible), then as a string, then as a symbol.
The first key that works is the one used.</p>
<p>(=l key1/key2/key3 data-structure thunk )</p>
<p>=l works like s=, but if the key cannot be found, the thunk will run, and its
result will be returned.</p>
<pre><code>(=f data/path data-structure value )
</code></pre>
<p>=f works just like =l, but if the key is not found, the default value is returned.</p>
<h3 id="caveats">Caveats</h3>
<p>Racket currently seems to check only the first element of a list to see if it is
a cons-list.  This means that a list that has a pair for its first element may
be mistaken for a cons-list, and then assoc will be used to look up the list index as
if it were an assoc key. There is currently no way of forcing a list index in
this circumstance, so you'll have to extract the element yourself.</p>
<p><em>Status</em><br>
Incomplete - needs hash setters</p>
<h3 id="download">Download</h3>
<p><a href="spath.rkt">spath for PLT racket</a></p>

			</article>
			</html>
			